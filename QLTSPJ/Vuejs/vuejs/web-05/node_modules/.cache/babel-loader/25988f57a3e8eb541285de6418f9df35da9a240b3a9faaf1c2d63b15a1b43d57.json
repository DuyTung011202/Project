{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"main-header d-flex justify-content-between\"\n};\nconst _hoisted_2 = {\n  class: \"l-main d-flex align-items-center\"\n};\nconst _hoisted_3 = {\n  class: \"r-main d-flex align-items-center\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_MISAInput = _resolveComponent(\"MISAInput\");\n  const _component_MISACombobox = _resolveComponent(\"MISACombobox\");\n  const _component_MISAButton = _resolveComponent(\"MISAButton\");\n  const _component_MISATable = _resolveComponent(\"MISATable\");\n  const _component_MISAForm = _resolveComponent(\"MISAForm\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_MISAInput, {\n    iconClass: \"input-icon icon-search\",\n    customClass: \"default-input\",\n    customPlaceholder: \"Tìm kiếm tài sản\"\n  }), _createVNode(_component_MISACombobox, {\n    iconClass: \"input-icon icon-filter\",\n    customClass: \"default-input\",\n    customPlaceholder: \"Loại tài sản\"\n  }), _createVNode(_component_MISACombobox, {\n    iconClass: \"input-icon icon-filter\",\n    customClass: \"default-input\",\n    customPlaceholder: \"Bộ phận sử dụng\"\n  })]), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_MISAButton, {\n    customId: \"btn-add\",\n    customClass: \"btn--primary d-flex align-items-center\",\n    iconClass: \"btn--primary-icon\",\n    text: \"Thêm tài sản\",\n    onClick: $options.handleForm\n  }, null, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_MISAButton, {\n    iconClass: \"btn--option\"\n  }), _createVNode(_component_MISAButton, {\n    iconClass: \"btn--delete\",\n    onClick: $options.deleteSelected\n  }, null, 8 /* PROPS */, [\"onClick\"])])]), _createVNode(_component_MISATable, {\n    products: $data.products,\n    totalQuantity: $options.totalQuantity,\n    totalPrice: $options.totalPrice,\n    totalDepreciation: $options.totalDepreciation,\n    totalResidual: $options.totalResidual,\n    onUpdate: $options.onUpdate\n  }, null, 8 /* PROPS */, [\"products\", \"totalQuantity\", \"totalPrice\", \"totalDepreciation\", \"totalResidual\", \"onUpdate\"]), $data.isFormVisible ? (_openBlock(), _createBlock(_component_MISAForm, {\n    key: 0,\n    isFormVisible: $data.isFormVisible,\n    onCloseForm: $options.closeForm,\n    productEdit: $data.productForUpdate\n  }, null, 8 /* PROPS */, [\"isFormVisible\", \"onCloseForm\", \"productEdit\"])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","_component_MISAInput","iconClass","customClass","customPlaceholder","_component_MISACombobox","_hoisted_3","_component_MISAButton","customId","text","onClick","$options","handleForm","deleteSelected","_component_MISATable","products","$data","totalQuantity","totalPrice","totalDepreciation","totalResidual","onUpdate","isFormVisible","_createBlock","_component_MISAForm","onCloseForm","closeForm","productEdit","productForUpdate"],"sources":["C:\\Users\\Admin\\Desktop\\MISA_FRESHER_WEB\\web202305\\mf1661-ddtung\\vuejs\\web-05\\src\\views\\product\\ProductList.vue"],"sourcesContent":["<template>\r\n  <div class=\"main-header d-flex justify-content-between\">\r\n    <div class=\"l-main d-flex align-items-center\">\r\n      <MISAInput iconClass=\"input-icon icon-search\" customClass=\"default-input\" customPlaceholder=\"Tìm kiếm tài sản\">\r\n      </MISAInput>\r\n      <MISACombobox iconClass=\"input-icon icon-filter\" customClass=\"default-input\" customPlaceholder=\"Loại tài sản\">\r\n      </MISACombobox>\r\n      <MISACombobox iconClass=\"input-icon icon-filter\" customClass=\"default-input\" customPlaceholder=\"Bộ phận sử dụng\">\r\n      </MISACombobox>\r\n\r\n    </div>\r\n    <div class=\"r-main d-flex align-items-center\">\r\n      <MISAButton customId=\"btn-add\" customClass=\"btn--primary d-flex align-items-center\" iconClass=\"btn--primary-icon\"\r\n        text=\"Thêm tài sản\" @click=\"handleForm\">\r\n      </MISAButton>\r\n      <MISAButton iconClass=\"btn--option\"></MISAButton>\r\n      <MISAButton iconClass=\"btn--delete\" @click=\"deleteSelected\"></MISAButton>\r\n    </div>\r\n  </div>\r\n\r\n  <MISATable :products=\"products\" :totalQuantity=\"totalQuantity\" :totalPrice=\"totalPrice\"\r\n    :totalDepreciation=\"totalDepreciation\" :totalResidual=\"totalResidual\" :onUpdate=\"onUpdate\"></MISATable>\r\n\r\n\r\n  <MISAForm v-if=\"isFormVisible\" :isFormVisible=\"isFormVisible\" @close-form=\"closeForm\" :productEdit=\"productForUpdate\">\r\n  </MISAForm>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: \"ProductList\",\r\n  /**\r\n   * @author: DDTung (27/06/2023)\r\n   * @description: Lấy api sản phẩm \r\n   */\r\n  created() {\r\n    try {\r\n      fetch(\"https://64798739a455e257fa6347c2.mockapi.io/users\")\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          this.products = data;\r\n        });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      products: [],\r\n      isFormVisible: false,\r\n      productForUpdate: {},\r\n      productForAdd: {\r\n        ProductsCode: \"TS00001\",\r\n        ProductsName: \"\",\r\n        ProductsType: \"\",\r\n        ProductsDepartment: \"\",\r\n        ProductsQuantity: 1,\r\n        ProductsPrice: 0,\r\n        ProductsDepreciation: 1,\r\n        ProductsResidual: 0,\r\n        ProductsChecked: false,\r\n        DepartmentCode: \"\",\r\n      }\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    /**\r\n     * @returns: Tính tổng số lượng\r\n     * @author: DDTung (27/06/2023)\r\n     */\r\n    totalQuantity() {\r\n      return this.products.reduce((total, product) => total + product.ProductsQuantity, 0);\r\n    },\r\n    /**\r\n    * @returns: Tính tổng nguyên giá\r\n    * @author: DDTung (27/06/2023)\r\n    */\r\n    totalPrice() {\r\n      return this.products.reduce((total, product) => total + Number(product.ProductsPrice), 0);\r\n    },\r\n    /**\r\n    * @returns: Tính tổng khấu hao\r\n    * @author: DDTung (27/06/2023)\r\n    */\r\n    totalDepreciation() {\r\n      return this.products.reduce((total, product) => total + Number(product.ProductsDepreciation), 0);\r\n    },\r\n    /**\r\n    * @returns: Tính tổng số tiền còn lại\r\n    * @author: DDTung (27/06/2023)\r\n    */\r\n    totalResidual() {\r\n      return this.products.reduce((total, product) => total + Number(product.ProductsResidual), 0);\r\n    },\r\n  },\r\n  methods: {\r\n    handleForm() {\r\n      this.productForUpdate = this.productForAdd\r\n      this.isFormVisible = true;\r\n    },\r\n    closeForm() {\r\n      this.productForUpdate = this.productForAdd;\r\n      this.isFormVisible = false;\r\n    },\r\n    onDelete(index) {\r\n      this.products.splice(index, 1);\r\n    },\r\n    onUpdate(product) {\r\n      this.isFormVisible = true;\r\n      this.productForUpdate = product\r\n    },\r\n    btnAddOnClick() {\r\n      this.productForUpdate = {};\r\n      this.isFormVisible = true;\r\n    },\r\n    deleteSelected() {\r\n      const selectedProductIds = this.products\r\n        .filter(product => product.ProductsChecked)\r\n        .map(product => product.id);\r\n      axios.delete('https://64798739a455e257fa6347c2.mockapi.io/users/id')\r\n        .then(response => {\r\n          console.log(response);\r\n          this.products = this.products.filter(product => !product.ProductsChecked);\r\n        })\r\n        .catch(error => {\r\n          console.error(error);\r\n        });\r\n\r\n    }\r\n  }\r\n\r\n\r\n\r\n}\r\n</script>\r\n\r\n<style></style>"],"mappings":";;EACOA,KAAK,EAAC;AAA4C;;EAChDA,KAAK,EAAC;AAAkC;;EASxCA,KAAK,EAAC;AAAkC;;;;;;;6DAV/CC,mBAAA,CAiBM,OAjBNC,UAiBM,GAhBJD,mBAAA,CAQM,OARNE,UAQM,GAPJC,YAAA,CACYC,oBAAA;IADDC,SAAS,EAAC,wBAAwB;IAACC,WAAW,EAAC,eAAe;IAACC,iBAAiB,EAAC;MAE5FJ,YAAA,CACeK,uBAAA;IADDH,SAAS,EAAC,wBAAwB;IAACC,WAAW,EAAC,eAAe;IAACC,iBAAiB,EAAC;MAE/FJ,YAAA,CACeK,uBAAA;IADDH,SAAS,EAAC,wBAAwB;IAACC,WAAW,EAAC,eAAe;IAACC,iBAAiB,EAAC;QAIjGP,mBAAA,CAMM,OANNS,UAMM,GALJN,YAAA,CAEaO,qBAAA;IAFDC,QAAQ,EAAC,SAAS;IAACL,WAAW,EAAC,wCAAwC;IAACD,SAAS,EAAC,mBAAmB;IAC/GO,IAAI,EAAC,cAAc;IAAEC,OAAK,EAAEC,QAAA,CAAAC;wCAE9BZ,YAAA,CAAiDO,qBAAA;IAArCL,SAAS,EAAC;EAAa,IACnCF,YAAA,CAAyEO,qBAAA;IAA7DL,SAAS,EAAC,aAAa;IAAEQ,OAAK,EAAEC,QAAA,CAAAE;4CAIhDb,YAAA,CACyGc,oBAAA;IAD7FC,QAAQ,EAAEC,KAAA,CAAAD,QAAQ;IAAGE,aAAa,EAAEN,QAAA,CAAAM,aAAa;IAAGC,UAAU,EAAEP,QAAA,CAAAO,UAAU;IACnFC,iBAAiB,EAAER,QAAA,CAAAQ,iBAAiB;IAAGC,aAAa,EAAET,QAAA,CAAAS,aAAa;IAAGC,QAAQ,EAAEV,QAAA,CAAAU;0HAGnEL,KAAA,CAAAM,aAAa,I,cAA7BC,YAAA,CACWC,mBAAA;;IADqBF,aAAa,EAAEN,KAAA,CAAAM,aAAa;IAAGG,WAAU,EAAEd,QAAA,CAAAe,SAAS;IAAGC,WAAW,EAAEX,KAAA,CAAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}