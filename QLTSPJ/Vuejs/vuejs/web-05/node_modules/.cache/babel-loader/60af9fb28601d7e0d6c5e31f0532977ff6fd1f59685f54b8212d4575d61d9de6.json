{"ast":null,"code":"import { vModelText as _vModelText, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vShow as _vShow, toDisplayString as _toDisplayString, withModifiers as _withModifiers, withKeys as _withKeys, resolveDirective as _resolveDirective, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-fdaf08aa\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = [\"placeholder\", \"tabindex\"];\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"up-down\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"down\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"btn icon-down-bold\"\n})])], -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"drop-down\",\n  ref: \"bodyDrop\"\n};\nconst _hoisted_4 = {\n  class: \"drop-down-body\"\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = {\n  class: \"icon-tick\"\n};\nconst _hoisted_7 = [\"id\"];\nconst _hoisted_8 = {\n  class: \"drop-down-name\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _directive_outside = _resolveDirective(\"outside\");\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n    class: \"m-combobox\",\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.toggleCombobox && $options.toggleCombobox(...args)),\n    onKeydown: _cache[5] || (_cache[5] = _withKeys(_withModifiers((...args) => $options.selectItem && $options.selectItem(...args), [\"stop\"]), [\"enter\"])),\n    onKeyup: [_cache[6] || (_cache[6] = _withKeys((...args) => $options.keyDown && $options.keyDown(...args), [\"down\"])), _cache[7] || (_cache[7] = _withKeys((...args) => $options.keyUp && $options.keyUp(...args), [\"up\"]))]\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    class: _normalizeClass([\"input\", $props.border]),\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.keyword = $event),\n    placeholder: this.placeholder,\n    tabindex: $props.tab,\n    onBlur: _cache[1] || (_cache[1] = (...args) => $options.onBlur && $options.onBlur(...args)),\n    onKeydown: _cache[2] || (_cache[2] = (...args) => $options.keyTab && $options.keyTab(...args)),\n    onFocus: _cache[3] || (_cache[3] = (...args) => _ctx.onFocusCbb && _ctx.onFocusCbb(...args)),\n    ref: $props.refName\n  }, null, 42 /* CLASS, PROPS, HYDRATE_EVENTS */, _hoisted_1), [[_vModelText, $data.keyword]]), _hoisted_2, _withDirectives(_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.dataItems, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: _normalizeClass([\"drop-down-item\", item[$props.fieldCode] == $data.currentItem[$props.fieldCode] ? 'active' : '']),\n      onClick: _withModifiers($event => $options.onClickItem(item), [\"exact\", \"stop\"]),\n      key: item\n    }, [_createElementVNode(\"div\", _hoisted_6, [_withDirectives(_createElementVNode(\"div\", {\n      id: index,\n      class: \"tick\"\n    }, null, 8 /* PROPS */, _hoisted_7), [[_vShow, item[$props.fieldCode] == $data.currentItem[$props.fieldCode]]])]), _createElementVNode(\"div\", _hoisted_8, _toDisplayString(item[$props.fieldCode]), 1 /* TEXT */)], 10 /* CLASS, PROPS */, _hoisted_5);\n  }), 128 /* KEYED_FRAGMENT */))])], 512 /* NEED_PATCH */), [[_vShow, $data.isShowCbb]])], 32 /* HYDRATE_EVENTS */)), [[_directive_outside, $options.hideCbb]]);\n}","map":{"version":3,"names":["_createElementVNode","class","ref","_createElementBlock","onClick","_cache","args","$options","toggleCombobox","onKeydown","_withKeys","_withModifiers","selectItem","onKeyup","keyDown","keyUp","_normalizeClass","$props","border","$data","keyword","$event","placeholder","tabindex","tab","onBlur","keyTab","onFocus","_ctx","onFocusCbb","refName","_hoisted_2","_hoisted_3","_hoisted_4","_Fragment","_renderList","dataItems","item","index","fieldCode","currentItem","onClickItem","key","_hoisted_6","id","_hoisted_8","_toDisplayString","isShowCbb","hideCbb"],"sources":["C:\\Users\\Admin\\Desktop\\MISA_FRESHER_WEB\\web202305\\mf1661-ddtung\\vuejs\\web-05\\src\\components\\base\\combobox\\MISACombobox.vue"],"sourcesContent":["<template>\r\n    <div class=\"m-combobox\" @click=\"toggleCombobox\" @keydown.enter.stop=\"selectItem\" @keyup.down=\"keyDown\" @keyup.up=\"keyUp\"\r\n        v-outside=\"hideCbb\">\r\n        <input class=\"input\" v-model=\"keyword\" :placeholder=\"this.placeholder\" :tabindex=\"tab\" :class=\"border\"\r\n            @blur=\"onBlur\" @keydown=\"keyTab\" @focus=\"onFocusCbb\" :ref=\"refName\" />\r\n\r\n        <div class=\"up-down\">\r\n            <div class=\"down\">\r\n                <div class=\"btn icon-down-bold\"></div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"drop-down\" ref=\"bodyDrop\" v-show=\"isShowCbb\">\r\n            <div class=\"drop-down-body\">\r\n                <div v-for=\"(item, index) of dataItems\" class=\"drop-down-item\"\r\n                    :class=\"item[fieldCode] == currentItem[fieldCode] ? 'active' : ''\" @click.exact.stop=\"onClickItem(item)\"\r\n                    :key=\"item\">\r\n                    <div class=\"icon-tick\">\r\n                        <div :id=\"index\" v-show=\"item[fieldCode] == currentItem[fieldCode]\" class=\"tick\"></div>\r\n                    </div>\r\n\r\n                    <div class=\"drop-down-name\">{{ item[fieldCode] }}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<!-- :class=\"item[fieldCode] == currentItem[fieldCode] ? 'active' : ''\" -->\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        label: {\r\n            type: String,\r\n        },\r\n        items: {\r\n            type: Array,\r\n        },\r\n        fieldName: {\r\n            type: String,\r\n        },\r\n        fieldCode: {\r\n            type: String,\r\n        },\r\n        code: {\r\n            type: String,\r\n        },\r\n        tab: {\r\n            type: String,\r\n        },\r\n        border: {\r\n            type: String,\r\n        },\r\n        refName: {\r\n            type: String,\r\n        },\r\n        value: {\r\n            type: String,\r\n        },\r\n        Filter: {\r\n            type: Int16Array,\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            currentItem: {}, // item hiện tại\r\n            isShowCbb: false, // show drop-down\r\n            placeholder: \"Nhập giá trị \", // playholder\r\n            dataItems: [],\r\n            keyword: \"\",\r\n            i: -1,\r\n            hOfItem: 35,\r\n            hOfBody: 135,\r\n            filter: 0,\r\n        };\r\n    },\r\n\r\n    methods: {\r\n        /**\r\n         * hàm xử lý sự kiện click ra ngoài đóng cbb\r\n         * AUTHOR:HTTHOA(25/03/2023)\r\n         *\r\n         */\r\n        hideCbb() {\r\n            this.isShowCbb = false;\r\n        },\r\n        onBlur() {\r\n            setTimeout(() => {\r\n                this.isShowCbb = false;\r\n            }, 200);\r\n            this.$emit(\"keyword\", this.keyword);\r\n            console.log(this.keyword);\r\n            this.$emit(\"onBlur\");\r\n        },\r\n        /**\r\n         * hàm chọn item khi nhấn enter\r\n         *  AUTHOR:HTTHOA(25/03/2023)\r\n         *\r\n         */\r\n        keyTab() {\r\n            var code = event.keyCode || event.which;\r\n            if (code === 9) {\r\n                this.onFocus();\r\n            }\r\n        },\r\n        /**\r\n         * khi chọn 1 item trong combobox\r\n         *  AUTHOR:HTTHOA(25/03/2023)\r\n         */\r\n        selectItem() {\r\n            this.$emit(\"selectedItem\", this.currentItem);\r\n            console.log(this.currentItem);\r\n            this.keyword = this.currentItem[this.fieldCode];\r\n            this.placeholder = this.currentItem[this.fieldCode];\r\n            this.isShowCbb = false;\r\n            this.i = 0;\r\n            this.$el.querySelector(\".input\").focus();\r\n            // this.$refs.refName.focus();\r\n            this.dataItems = this.items;\r\n        },\r\n        /**\r\n         * hàm click chọn item\r\n         *  AUTHOR:HTTHOA(25/03/2023)\r\n         *\r\n         */\r\n        onClickItem(item) {\r\n            this.currentItem = item;\r\n            this.selectItem();\r\n        },\r\n        /**\r\n         * mở đóng combobox\r\n         *  AUTHOR:HTTHOA(25/03/2023)\r\n         */\r\n        toggleCombobox() {\r\n            this.isShowCbb = !this.isShowCbb;\r\n            if (this.isShowCbb == true) {\r\n                this.scrollItem((this.i - 1) * this.hOfItem);\r\n            }\r\n        },\r\n        /**\r\n         *\r\n         * cuộn combobox. nếu vị trí lớn hơn 0 thì cuộn đến tọa độ (0,position)\r\n         *  AUTHOR:HTTHOA(25/03/2023)\r\n         */\r\n        scrollItem(position) {\r\n            if (position >= 0) {\r\n                this.$refs.bodyDrop.scrollTo(0, position); //cuộn đến tọa độ (0,position)\r\n            }\r\n        },\r\n        /**\r\n         * khi keydown mở combobox\r\n         *  AUTHOR:HTTHOA(25/03/2023)\r\n         */\r\n        keyDown() {\r\n            try {\r\n                if (!this.isShowCbb) {\r\n                    this.isShowCbb = true;\r\n                } else {\r\n                    this.i++;\r\n                    if (this.i > this.dataItems.length - 1) {\r\n                        this.i = this.dataItems.length - 1;\r\n                    }\r\n                    this.currentItem = this.dataItems[this.i];\r\n                    this.scrollItem((this.i - 1) * this.hOfItem);\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        },\r\n        /**\r\n         * key down thì gán item hiện tại bằng item ở mảng ở vị trí i\r\n         *  AUTHOR:HTTHOA(25/03/2023)\r\n         */\r\n        keyUp() {\r\n            try {\r\n                if (this.i > 0) {\r\n                    this.i--;\r\n                    this.currentItem = this.dataItems[this.i];\r\n                    this.scrollItem((this.i - 1) * this.hOfItem);\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * hàm xử lý sự kiện focus\r\n         *  AUTHOR:HTTHOA(25/03/2023)\r\n         *\r\n         */\r\n        onFocus() {\r\n            // khi focus thì select\r\n            // this.$refs.refName.select();\r\n            this.$emit(\"keyword\", this.keyword);\r\n        },\r\n    },\r\n    created() {\r\n\r\n        // this.placeholder = this.label;\r\n        this.$emit(\"onFocusCbb\");\r\n        this.keyword = this.value;\r\n        for (const item of this.items) {\r\n            if (item[this.fieldName] == this.initValue) {\r\n                this.currentItem = item;\r\n            }\r\n        }\r\n    },\r\n    watch: {\r\n        Filter: function (value) {\r\n            this.filter = value;\r\n            console.log(value);\r\n        },\r\n        items: function (value) {\r\n            // nhận mảng item để hiển thị\r\n            this.dataItems = value;\r\n        },\r\n        value: function (vl) {\r\n            this.keyword = vl;\r\n        },\r\n        /**\r\n         * theo dõi biến key word\r\n         *  AUTHOR:HTTHOA(25/03/2023)\r\n         */\r\n        keyword() {\r\n            if (this.keyword != this.currentItem[this.fieldCode]) {\r\n                if (this.keyword == \"\") {\r\n                    this.currentItem = \"\";\r\n                    this.$emit(\"selectedItem\", this.currentItem);\r\n                }\r\n            } else if (this.keyword) {\r\n                // this.isShowCbb=!this.isShowCbb\r\n                this.dataItems.forEach((item) => {\r\n                    let valueSearch = item[this.fieldCode].trim().toLowerCase();\r\n                    if (valueSearch.includes(this.keyword.trim().toLowerCase())) {\r\n                        return item;\r\n                    }\r\n                });\r\n            } else {\r\n                this.dataItems = this.items;\r\n            }\r\n        },\r\n    },\r\n    mounted() {\r\n\r\n        var i = this.$refs.refName\r\n        console.log(i);\r\n        this.emitter.on(\"focus\", () => {\r\n            this.$el.querySelector(\".input\").focus()\r\n            // this.$el.querySelector(\".input\").focus();\r\n        });\r\n        // xét giá trị ban đầu cho combobox\r\n        this.currentItem[this.fieldCode] = this.code;\r\n\r\n        // this.item.filter((item,index)=>{\r\n        //   if(item[this.fieldCode]===this.currentItem[this.fieldCode]){\r\n        //     this.i=index\r\n        //   }\r\n        // })\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import url(../../../css/combobox.css);\r\n\r\n.icon-tick {\r\n    margin-top: 12px;\r\n}\r\n\r\n.drop-down-name {\r\n    padding-left: 6px;\r\n}\r\n\r\n/* .tick {\r\n  padding-top: 4px;\r\n  margin-top: 4px;\r\n  margin-left: 5px;\r\n} */\r\n.drop-down-item {\r\n    display: flex;\r\n}\r\n\r\n.border-red {\r\n    border-color: #e03232 !important;\r\n}\r\n\r\n.m-combobox-2 .drop-down .drop-down-body {\r\n    max-height: 110px;\r\n\r\n    height: fit-content;\r\n    overflow-y: scroll;\r\n    overflow-x: hidden;\r\n}\r\n\r\n.m-combobox-2 .input {\r\n    padding: 0 20px 0 32px;\r\n    width: 230px;\r\n    margin-top: 0px;\r\n    height: 36px;\r\n    box-sizing: border-box;\r\n    border-radius: 2.5px;\r\n}\r\n\r\n.m-combobox .icon {\r\n    position: absolute;\r\n    left: 6px;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n    cursor: pointer;\r\n}\r\n\r\n.m-combobox .up-down {\r\n    position: absolute;\r\n    right: 19px;\r\n    /* top: 50%; */\r\n    transform: translateY(-50%);\r\n    justify-content: center;\r\n}\r\n</style>\r\n"],"mappings":";;;gEAMQA,mBAAA,CAIM;EAJDC,KAAK,EAAC;AAAS,I,aAChBD,mBAAA,CAEM;EAFDC,KAAK,EAAC;AAAM,I,aACbD,mBAAA,CAAsC;EAAjCC,KAAK,EAAC;AAAoB,G;;EAIlCA,KAAK,EAAC,WAAW;EAACC,GAAG,EAAC;;;EAClBD,KAAK,EAAC;AAAgB;;;EAIdA,KAAK,EAAC;AAAW;;;EAIjBA,KAAK,EAAC;AAAgB;;;wCApB3CE,mBAAA,CAwBM;IAxBDF,KAAK,EAAC,YAAY;IAAEG,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,cAAA,IAAAD,QAAA,CAAAC,cAAA,IAAAF,IAAA,CAAc;IAAGG,SAAO,EAAAJ,MAAA,QAAAA,MAAA,MAAAK,SAAA,CAAAC,cAAA,KAAAL,IAAA,KAAaC,QAAA,CAAAK,UAAA,IAAAL,QAAA,CAAAK,UAAA,IAAAN,IAAA,CAAU;IAAGO,OAAK,G,iDAAON,QAAA,CAAAO,OAAA,IAAAP,QAAA,CAAAO,OAAA,IAAAR,IAAA,CAAO,c,iDAAaC,QAAA,CAAAQ,KAAA,IAAAR,QAAA,CAAAQ,KAAA,IAAAT,IAAA,CAAK;sBAEnHN,mBAAA,CAC0E;IADnEC,KAAK,EAAAe,eAAA,EAAC,OAAO,EAA2EC,MAAA,CAAAC,MAAM;+DAAvEC,KAAA,CAAAC,OAAO,GAAAC,MAAA;IAAGC,WAAW,OAAOA,WAAW;IAAGC,QAAQ,EAAEN,MAAA,CAAAO,GAAG;IAChFC,MAAI,EAAApB,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAkB,MAAA,IAAAlB,QAAA,CAAAkB,MAAA,IAAAnB,IAAA,CAAM;IAAGG,SAAO,EAAAJ,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAmB,MAAA,IAAAnB,QAAA,CAAAmB,MAAA,IAAApB,IAAA,CAAM;IAAGqB,OAAK,EAAAtB,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEsB,IAAA,CAAAC,UAAA,IAAAD,IAAA,CAAAC,UAAA,IAAAvB,IAAA,CAAU;IAAGJ,GAAG,EAAEe,MAAA,CAAAa;8EADjCX,KAAA,CAAAC,OAAO,E,GAGrCW,UAIM,E,gBAEN/B,mBAAA,CAYM,OAZNgC,UAYM,GAXFhC,mBAAA,CAUM,OAVNiC,UAUM,I,kBATF9B,mBAAA,CAQM+B,SAAA,QAAAC,WAAA,CARuBhB,KAAA,CAAAiB,SAAS,GAAzBC,IAAI,EAAEC,KAAK;yBAAxBnC,mBAAA,CAQM;MARkCF,KAAK,EAAAe,eAAA,EAAC,gBAAgB,EAClDqB,IAAI,CAACpB,MAAA,CAAAsB,SAAS,KAAKpB,KAAA,CAAAqB,WAAW,CAACvB,MAAA,CAAAsB,SAAS;MAAoBnC,OAAK,EAAAO,cAAA,CAAAU,MAAA,IAAad,QAAA,CAAAkC,WAAW,CAACJ,IAAI;MACrGK,GAAG,EAAEL;QACNrC,mBAAA,CAEM,OAFN2C,UAEM,G,gBADF3C,mBAAA,CAAuF;MAAjF4C,EAAE,EAAEN,KAAK;MAAqDrC,KAAK,EAAC;mDAAjDoC,IAAI,CAACpB,MAAA,CAAAsB,SAAS,KAAKpB,KAAA,CAAAqB,WAAW,CAACvB,MAAA,CAAAsB,SAAS,G,KAGrEvC,mBAAA,CAAuD,OAAvD6C,UAAuD,EAAAC,gBAAA,CAAxBT,IAAI,CAACpB,MAAA,CAAAsB,SAAS,kB;sEATXpB,KAAA,CAAA4B,SAAS,E,qDAV5CxC,QAAA,CAAAyC,OAAO,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}