{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: \"ProductList\",\n  /**\r\n   * @author: DDTung (27/06/2023)\r\n   * @description: Lấy api sản phẩm \r\n   */\n  created() {\n    try {\n      fetch(\"https://64798739a455e257fa6347c2.mockapi.io/users\").then(res => res.json()).then(data => {\n        this.products = data;\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  },\n  data() {\n    return {\n      products: [],\n      isFormVisible: false,\n      productForUpdate: {},\n      productForAdd: {\n        ProductsCode: \"TS00001\",\n        ProductsName: \"\",\n        ProductsType: \"\",\n        ProductsDepartment: \"\",\n        ProductsQuantity: 1,\n        ProductsPrice: 0,\n        ProductsDepreciation: 1,\n        ProductsResidual: 0,\n        ProductsChecked: false,\n        DepartmentCode: \"\"\n      }\n    };\n  },\n  computed: {\n    /**\r\n     * @returns: Tính tổng số lượng\r\n     * @author: DDTung (27/06/2023)\r\n     */\n    totalQuantity() {\n      return this.products.reduce((total, product) => total + product.ProductsQuantity, 0);\n    },\n    /**\r\n    * @returns: Tính tổng nguyên giá\r\n    * @author: DDTung (27/06/2023)\r\n    */\n    totalPrice() {\n      return this.products.reduce((total, product) => total + Number(product.ProductsPrice), 0);\n    },\n    /**\r\n    * @returns: Tính tổng khấu hao\r\n    * @author: DDTung (27/06/2023)\r\n    */\n    totalDepreciation() {\n      return this.products.reduce((total, product) => total + Number(product.ProductsDepreciation), 0);\n    },\n    /**\r\n    * @returns: Tính tổng số tiền còn lại\r\n    * @author: DDTung (27/06/2023)\r\n    */\n    totalResidual() {\n      return this.products.reduce((total, product) => total + Number(product.ProductsResidual), 0);\n    }\n  },\n  methods: {\n    handleForm() {\n      this.productForUpdate = this.productForAdd;\n      this.isFormVisible = true;\n    },\n    closeForm() {\n      this.productForUpdate = this.productForAdd;\n      this.isFormVisible = false;\n    },\n    onDelete(index) {\n      this.products.splice(index, 1);\n    },\n    onUpdate(product) {\n      this.isFormVisible = true;\n      this.productForUpdate = product;\n    },\n    btnAddOnClick() {\n      this.productForUpdate = {};\n      this.isFormVisible = true;\n    },\n    deleteSelected(product) {\n      axios.delete(`https://64798739a455e257fa6347c2.mockapi.io/users/${product.id}`).then(response => {\n        console.log(response);\n        this.products = this.products.filter(product => !product.ProductsChecked);\n      }).catch(error => {\n        console.error(error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","name","created","fetch","then","res","json","data","products","err","console","log","isFormVisible","productForUpdate","productForAdd","ProductsCode","ProductsName","ProductsType","ProductsDepartment","ProductsQuantity","ProductsPrice","ProductsDepreciation","ProductsResidual","ProductsChecked","DepartmentCode","computed","totalQuantity","reduce","total","product","totalPrice","Number","totalDepreciation","totalResidual","methods","handleForm","closeForm","onDelete","index","splice","onUpdate","btnAddOnClick","deleteSelected","delete","id","response","filter","catch","error"],"sources":["C:\\Users\\Admin\\Desktop\\MISA_FRESHER_WEB\\web202305\\mf1661-ddtung\\vuejs\\web-05\\src\\views\\product\\ProductList.vue"],"sourcesContent":["<template>\r\n  <div class=\"main-header d-flex justify-content-between\">\r\n    <div class=\"l-main d-flex align-items-center\">\r\n      <MISAInput iconClass=\"input-icon icon-search\" customClass=\"default-input\" customPlaceholder=\"Tìm kiếm tài sản\">\r\n      </MISAInput>\r\n      <MISACombobox iconClass=\"input-icon icon-filter\" customClass=\"default-input\" customPlaceholder=\"Loại tài sản\">\r\n      </MISACombobox>\r\n      <MISACombobox iconClass=\"input-icon icon-filter\" customClass=\"default-input\" customPlaceholder=\"Bộ phận sử dụng\">\r\n      </MISACombobox>\r\n\r\n    </div>\r\n    <div class=\"r-main d-flex align-items-center\">\r\n      <MISAButton customId=\"btn-add\" customClass=\"btn--primary d-flex align-items-center\" iconClass=\"btn--primary-icon\"\r\n        text=\"Thêm tài sản\" @click=\"handleForm\">\r\n      </MISAButton>\r\n      <MISAButton iconClass=\"btn--option\"></MISAButton>\r\n      <MISAButton iconClass=\"btn--delete\" @click=\"deleteSelected\"></MISAButton>\r\n    </div>\r\n  </div>\r\n\r\n  <MISATable :products=\"products\" :totalQuantity=\"totalQuantity\" :totalPrice=\"totalPrice\"\r\n    :totalDepreciation=\"totalDepreciation\" :totalResidual=\"totalResidual\" :onUpdate=\"onUpdate\"></MISATable>\r\n\r\n\r\n  <MISAForm v-if=\"isFormVisible\" :isFormVisible=\"isFormVisible\" @close-form=\"closeForm\" :productEdit=\"productForUpdate\">\r\n  </MISAForm>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: \"ProductList\",\r\n  /**\r\n   * @author: DDTung (27/06/2023)\r\n   * @description: Lấy api sản phẩm \r\n   */\r\n  created() {\r\n    try {\r\n      fetch(\"https://64798739a455e257fa6347c2.mockapi.io/users\")\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          this.products = data;\r\n        });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      products: [],\r\n      isFormVisible: false,\r\n      productForUpdate: {},\r\n      productForAdd: {\r\n        ProductsCode: \"TS00001\",\r\n        ProductsName: \"\",\r\n        ProductsType: \"\",\r\n        ProductsDepartment: \"\",\r\n        ProductsQuantity: 1,\r\n        ProductsPrice: 0,\r\n        ProductsDepreciation: 1,\r\n        ProductsResidual: 0,\r\n        ProductsChecked: false,\r\n        DepartmentCode: \"\",\r\n      }\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    /**\r\n     * @returns: Tính tổng số lượng\r\n     * @author: DDTung (27/06/2023)\r\n     */\r\n    totalQuantity() {\r\n      return this.products.reduce((total, product) => total + product.ProductsQuantity, 0);\r\n    },\r\n    /**\r\n    * @returns: Tính tổng nguyên giá\r\n    * @author: DDTung (27/06/2023)\r\n    */\r\n    totalPrice() {\r\n      return this.products.reduce((total, product) => total + Number(product.ProductsPrice), 0);\r\n    },\r\n    /**\r\n    * @returns: Tính tổng khấu hao\r\n    * @author: DDTung (27/06/2023)\r\n    */\r\n    totalDepreciation() {\r\n      return this.products.reduce((total, product) => total + Number(product.ProductsDepreciation), 0);\r\n    },\r\n    /**\r\n    * @returns: Tính tổng số tiền còn lại\r\n    * @author: DDTung (27/06/2023)\r\n    */\r\n    totalResidual() {\r\n      return this.products.reduce((total, product) => total + Number(product.ProductsResidual), 0);\r\n    },\r\n  },\r\n  methods: {\r\n    handleForm() {\r\n      this.productForUpdate = this.productForAdd\r\n      this.isFormVisible = true;\r\n    },\r\n    closeForm() {\r\n      this.productForUpdate = this.productForAdd;\r\n      this.isFormVisible = false;\r\n    },\r\n    onDelete(index) {\r\n      this.products.splice(index, 1);\r\n    },\r\n    onUpdate(product) {\r\n      this.isFormVisible = true;\r\n      this.productForUpdate = product\r\n    },\r\n    btnAddOnClick() {\r\n      this.productForUpdate = {};\r\n      this.isFormVisible = true;\r\n    },\r\n    deleteSelected(product) {\r\n      axios.delete(`https://64798739a455e257fa6347c2.mockapi.io/users/${product.id}`)\r\n        .then(response => {\r\n          console.log(response);\r\n          this.products = this.products.filter(product => !product.ProductsChecked);\r\n        })\r\n        .catch(error => {\r\n          console.error(error);\r\n        });\r\n\r\n    }\r\n  }\r\n\r\n\r\n\r\n}\r\n</script>\r\n\r\n<style></style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}