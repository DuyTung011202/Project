{"ast":null,"code":"import axios from 'axios';\nimport { departmentURL } from \"@/js/common/urlAsset\";\nexport default {\n  name: \"ProductList\",\n  /**\r\n   * @author: DDTung (27/06/2023)\r\n   * @description: Lấy api sản phẩm \r\n   */\n  async created() {\n    try {\n      this.isLoading = true;\n      const response = await axios.get(\"https://64798739a455e257fa6347c2.mockapi.io/users\");\n      await new Promise(resolve => setTimeout(resolve, 3000));\n      this.products = response.data;\n      this.handleCaculate();\n      this.isLoading = false;\n    } catch (error) {\n      console.error(error);\n    }\n  },\n  data() {\n    return {\n      products: [],\n      isFormVisible: false,\n      comboboxUrl: departmentURL,\n      productForUpdate: {},\n      productForAdd: {\n        ProductsCode: \"TS00001\",\n        ProductsName: \"\",\n        ProductsType: \"\",\n        ProductsDepartment: \"\",\n        ProductsQuantity: 1,\n        ProductsPrice: 0,\n        ProductsDepreciation: 1,\n        ProductsResidual: 0,\n        ProductsChecked: false,\n        DepartmentCode: \"\"\n      },\n      totalQuantity: 0,\n      totalPrice: 0,\n      totalDepreciation: 0,\n      totalResidual: 0\n    };\n  },\n  methods: {\n    handleForm() {\n      this.productForUpdate = this.productForAdd;\n      this.isFormVisible = true;\n    },\n    closeForm() {\n      this.productForUpdate = this.productForAdd;\n      this.isFormVisible = false;\n    },\n    onUpdate(product) {\n      this.isFormVisible = true;\n      this.productForUpdate = product;\n    },\n    btnAddOnClick() {\n      this.productForUpdate = {};\n      this.isFormVisible = true;\n    },\n    async deleteSelected() {\n      const selectedProducts = this.products.filter(product => product.ProductsChecked);\n      for (const product of selectedProducts) {\n        try {\n          await axios.delete(`https://64798739a455e257fa6347c2.mockapi.io/users/${product.ProductsId}`);\n          this.products = this.products.filter(p => p.ProductsId !== product.ProductsId);\n          window.location.reload();\n        } catch (error) {\n          console.error(error);\n        }\n      }\n    },\n    handleCaculate() {\n      this.caculateTotalQuantity(), this.caculateTotalPrice(), this.caculateTotalDepreciation(), this.caculateTotalResidual();\n    },\n    /**\r\n    * @returns: Tính tổng số lượng\r\n    * @author: DDTung (27/06/2023)\r\n    */\n    caculateTotalQuantity() {\n      this.totalQuantity = this.products.reduce((total, product) => total + product.ProductsQuantity, 0);\n    },\n    /**\r\n    * @returns: Tính tổng nguyên giá\r\n    * @author: DDTung (27/06/2023)\r\n    */\n    caculateTotalPrice() {\n      this.totalPrice = this.products.reduce((total, product) => total + Number(product.ProductsPrice), 0);\n    },\n    /**\r\n    * @returns: Tính tổng khấu hao\r\n    * @author: DDTung (27/06/2023)\r\n    */\n    caculateTotalDepreciation() {\n      this.totalDepreciation = this.products.reduce((total, product) => total + Number(product.ProductsDepreciation), 0);\n    },\n    /**\r\n    * @returns: Tính tổng số tiền còn lại\r\n    * @author: DDTung (27/06/2023)\r\n    */\n    caculateTotalResidual() {\n      this.totalResidual = this.products.reduce((total, product) => total + Number(product.ProductsResidual), 0);\n    }\n  }\n};","map":{"version":3,"names":["axios","departmentURL","name","created","isLoading","response","get","Promise","resolve","setTimeout","products","data","handleCaculate","error","console","isFormVisible","comboboxUrl","productForUpdate","productForAdd","ProductsCode","ProductsName","ProductsType","ProductsDepartment","ProductsQuantity","ProductsPrice","ProductsDepreciation","ProductsResidual","ProductsChecked","DepartmentCode","totalQuantity","totalPrice","totalDepreciation","totalResidual","methods","handleForm","closeForm","onUpdate","product","btnAddOnClick","deleteSelected","selectedProducts","filter","delete","ProductsId","p","window","location","reload","caculateTotalQuantity","caculateTotalPrice","caculateTotalDepreciation","caculateTotalResidual","reduce","total","Number"],"sources":["D:\\Learning\\MISA_FRESHER_WEB\\freshermisa\\web202305\\mf1661-ddtung\\vuejs\\web-05\\src\\views\\product\\ProductList.vue"],"sourcesContent":["<template>\r\n  <div class=\"main-header d-flex justify-content-between\">\r\n    <div class=\"l-main d-flex align-items-center\">\r\n      <MISAInput iconClass=\"input-icon icon-search\" customClass=\"default-input\" customPlaceholder=\"Tìm kiếm tài sản\">\r\n      </MISAInput>\r\n      <MISACombobox iconClass=\"input-icon icon-filter\" placeholder=\"Loại tài sản\" :propApi=\"comboboxUrl\"\r\n        propKey=\"DepartmentIds\" propValue=\"DepartmentCode\">\r\n      </MISACombobox>\r\n\r\n      <MISACombobox iconClass=\"input-icon icon-filter\" placeholder=\"Bộ phận sử dụng\">\r\n      </MISACombobox>\r\n\r\n    </div>\r\n    <div class=\"r-main d-flex align-items-center\">\r\n      <MISAButton customId=\"btn-add\" customClass=\"btn--primary d-flex align-items-center\" iconClass=\"btn--primary-icon\"\r\n        text=\"Thêm tài sản\" @click=\"handleForm\">\r\n      </MISAButton>\r\n      <MISAButton iconClass=\"btn--option\"></MISAButton>\r\n      <MISAButton iconClass=\"btn--delete\" @click=\"deleteSelected\"></MISAButton>\r\n    </div>\r\n  </div>\r\n\r\n  <MISATable :handleCaculate=\"handleCaculate\" :products=\"products\" :totalQuantity=\"totalQuantity\" :totalPrice=\"totalPrice\"\r\n    :totalDepreciation=\"totalDepreciation\" :totalResidual=\"totalResidual\" :onUpdate=\"onUpdate\">\r\n  </MISATable>\r\n\r\n  <MISAForm v-if=\"isFormVisible\" :isFormVisible=\"isFormVisible\" @close-form=\"closeForm\" :productEdit=\"productForUpdate\">\r\n  </MISAForm>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { departmentURL } from \"@/js/common/urlAsset\";\r\n\r\nexport default {\r\n  name: \"ProductList\",\r\n  /**\r\n   * @author: DDTung (27/06/2023)\r\n   * @description: Lấy api sản phẩm \r\n   */\r\n  async created() {\r\n    try {\r\n      this.isLoading = true;\r\n      const response = await axios.get(\"https://64798739a455e257fa6347c2.mockapi.io/users\");\r\n      await new Promise((resolve) => setTimeout(resolve, 3000));\r\n      this.products = response.data;\r\n      this.handleCaculate();\r\n      this.isLoading = false;\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  },\r\n\r\n\r\n  data() {\r\n    return {\r\n      products: [],\r\n      isFormVisible: false,\r\n      comboboxUrl: departmentURL,\r\n      productForUpdate: {},\r\n      productForAdd: {\r\n        ProductsCode: \"TS00001\",\r\n        ProductsName: \"\",\r\n        ProductsType: \"\",\r\n        ProductsDepartment: \"\",\r\n        ProductsQuantity: 1,\r\n        ProductsPrice: 0,\r\n        ProductsDepreciation: 1,\r\n        ProductsResidual: 0,\r\n        ProductsChecked: false,\r\n        DepartmentCode: \"\",\r\n      },\r\n      totalQuantity: 0,\r\n      totalPrice: 0,\r\n      totalDepreciation: 0,\r\n      totalResidual: 0,\r\n\r\n    };\r\n  },\r\n\r\n\r\n  methods: {\r\n    handleForm() {\r\n      this.productForUpdate = this.productForAdd\r\n      this.isFormVisible = true;\r\n    },\r\n    closeForm() {\r\n      this.productForUpdate = this.productForAdd;\r\n      this.isFormVisible = false;\r\n    },\r\n    onUpdate(product) {\r\n      this.isFormVisible = true;\r\n      this.productForUpdate = product\r\n    },\r\n    btnAddOnClick() {\r\n      this.productForUpdate = {};\r\n      this.isFormVisible = true;\r\n    },\r\n    async deleteSelected() {\r\n      const selectedProducts = this.products.filter(product => product.ProductsChecked);\r\n      for (const product of selectedProducts) {\r\n        try {\r\n          await axios.delete(`https://64798739a455e257fa6347c2.mockapi.io/users/${product.ProductsId}`);\r\n          this.products = this.products.filter(p => p.ProductsId !== product.ProductsId);\r\n          window.location.reload();\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      }\r\n    },\r\n\r\n    handleCaculate() {\r\n      this.caculateTotalQuantity(),\r\n        this.caculateTotalPrice(),\r\n        this.caculateTotalDepreciation(),\r\n        this.caculateTotalResidual()\r\n    },\r\n\r\n    /**\r\n   * @returns: Tính tổng số lượng\r\n   * @author: DDTung (27/06/2023)\r\n   */\r\n    caculateTotalQuantity() {\r\n      this.totalQuantity = this.products.reduce((total, product) => total + product.ProductsQuantity, 0);\r\n    },\r\n    /**\r\n    * @returns: Tính tổng nguyên giá\r\n    * @author: DDTung (27/06/2023)\r\n    */\r\n    caculateTotalPrice() {\r\n      this.totalPrice = this.products.reduce((total, product) => total + Number(product.ProductsPrice), 0);\r\n    },\r\n    /**\r\n    * @returns: Tính tổng khấu hao\r\n    * @author: DDTung (27/06/2023)\r\n    */\r\n    caculateTotalDepreciation() {\r\n      this.totalDepreciation = this.products.reduce((total, product) => total + Number(product.ProductsDepreciation), 0);\r\n    },\r\n    /**\r\n    * @returns: Tính tổng số tiền còn lại\r\n    * @author: DDTung (27/06/2023)\r\n    */\r\n    caculateTotalResidual() {\r\n      this.totalResidual = this.products.reduce((total, product) => total + Number(product.ProductsResidual), 0);\r\n    },\r\n\r\n  }\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style>\r\n.l-main .v-combobox__body {\r\n  width: 180px !important;\r\n  border-radius: 2.5px;\r\n}\r\n\r\n\r\n.l-main .v-combobox__selected {\r\n  height: 35px;\r\n  padding: 0 20px 0 40px !important;\r\n  border: 1px solid #afafaf !important;\r\n  border-radius: 2.5px !important;\r\n\r\n\r\n}\r\n\r\n\r\n.l-main .v-combobox__selected:hover {\r\n  border: 1px solid #1aa4c8 !important;\r\n\r\n}\r\n\r\n.l-main .v-combobox__focus {\r\n  border: 1px solid #1aa4c8 !important;\r\n\r\n}\r\n\r\n.l-main .v-combobox__icon[data-v-fdaf08aa] {\r\n  background: var(--icon-url) no-repeat -62px -322px !important;\r\n}\r\n\r\n.l-main .icon-filter {\r\n  background: var(--icon-url) no-repeat -240px -65px;\r\n}\r\n\r\n.l-main .v-select__list {\r\n  top: 100%;\r\n  min-height: 160px;\r\n}\r\n\r\n\r\n.r-main button {\r\n  padding: 0 !important;\r\n  border: unset !important;\r\n  ;\r\n}\r\n</style>"],"mappings":"AA+BA,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,aAAY,QAAS,sBAAsB;AAEpD,eAAe;EACbC,IAAI,EAAE,aAAa;EACnB;;;;EAIA,MAAMC,OAAOA,CAAA,EAAG;IACd,IAAI;MACF,IAAI,CAACC,SAAQ,GAAI,IAAI;MACrB,MAAMC,QAAO,GAAI,MAAML,KAAK,CAACM,GAAG,CAAC,mDAAmD,CAAC;MACrF,MAAM,IAAIC,OAAO,CAAEC,OAAO,IAAKC,UAAU,CAACD,OAAO,EAAE,IAAI,CAAC,CAAC;MACzD,IAAI,CAACE,QAAO,GAAIL,QAAQ,CAACM,IAAI;MAC7B,IAAI,CAACC,cAAc,CAAC,CAAC;MACrB,IAAI,CAACR,SAAQ,GAAI,KAAK;IACxB,EAAE,OAAOS,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACtB;EACF,CAAC;EAGDF,IAAIA,CAAA,EAAG;IACL,OAAO;MACLD,QAAQ,EAAE,EAAE;MACZK,aAAa,EAAE,KAAK;MACpBC,WAAW,EAAEf,aAAa;MAC1BgB,gBAAgB,EAAE,CAAC,CAAC;MACpBC,aAAa,EAAE;QACbC,YAAY,EAAE,SAAS;QACvBC,YAAY,EAAE,EAAE;QAChBC,YAAY,EAAE,EAAE;QAChBC,kBAAkB,EAAE,EAAE;QACtBC,gBAAgB,EAAE,CAAC;QACnBC,aAAa,EAAE,CAAC;QAChBC,oBAAoB,EAAE,CAAC;QACvBC,gBAAgB,EAAE,CAAC;QACnBC,eAAe,EAAE,KAAK;QACtBC,cAAc,EAAE;MAClB,CAAC;MACDC,aAAa,EAAE,CAAC;MAChBC,UAAU,EAAE,CAAC;MACbC,iBAAiB,EAAE,CAAC;MACpBC,aAAa,EAAE;IAEjB,CAAC;EACH,CAAC;EAGDC,OAAO,EAAE;IACPC,UAAUA,CAAA,EAAG;MACX,IAAI,CAACjB,gBAAe,GAAI,IAAI,CAACC,aAAY;MACzC,IAAI,CAACH,aAAY,GAAI,IAAI;IAC3B,CAAC;IACDoB,SAASA,CAAA,EAAG;MACV,IAAI,CAAClB,gBAAe,GAAI,IAAI,CAACC,aAAa;MAC1C,IAAI,CAACH,aAAY,GAAI,KAAK;IAC5B,CAAC;IACDqB,QAAQA,CAACC,OAAO,EAAE;MAChB,IAAI,CAACtB,aAAY,GAAI,IAAI;MACzB,IAAI,CAACE,gBAAe,GAAIoB,OAAM;IAChC,CAAC;IACDC,aAAaA,CAAA,EAAG;MACd,IAAI,CAACrB,gBAAe,GAAI,CAAC,CAAC;MAC1B,IAAI,CAACF,aAAY,GAAI,IAAI;IAC3B,CAAC;IACD,MAAMwB,cAAcA,CAAA,EAAG;MACrB,MAAMC,gBAAe,GAAI,IAAI,CAAC9B,QAAQ,CAAC+B,MAAM,CAACJ,OAAM,IAAKA,OAAO,CAACV,eAAe,CAAC;MACjF,KAAK,MAAMU,OAAM,IAAKG,gBAAgB,EAAE;QACtC,IAAI;UACF,MAAMxC,KAAK,CAAC0C,MAAM,CAAE,qDAAoDL,OAAO,CAACM,UAAW,EAAC,CAAC;UAC7F,IAAI,CAACjC,QAAO,GAAI,IAAI,CAACA,QAAQ,CAAC+B,MAAM,CAACG,CAAA,IAAKA,CAAC,CAACD,UAAS,KAAMN,OAAO,CAACM,UAAU,CAAC;UAC9EE,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;QAC1B,EAAE,OAAOlC,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;QACtB;MACF;IACF,CAAC;IAEDD,cAAcA,CAAA,EAAG;MACf,IAAI,CAACoC,qBAAqB,CAAC,CAAC,EAC1B,IAAI,CAACC,kBAAkB,CAAC,CAAC,EACzB,IAAI,CAACC,yBAAyB,CAAC,CAAC,EAChC,IAAI,CAACC,qBAAqB,CAAC;IAC/B,CAAC;IAED;;;;IAIAH,qBAAqBA,CAAA,EAAG;MACtB,IAAI,CAACnB,aAAY,GAAI,IAAI,CAACnB,QAAQ,CAAC0C,MAAM,CAAC,CAACC,KAAK,EAAEhB,OAAO,KAAKgB,KAAI,GAAIhB,OAAO,CAACd,gBAAgB,EAAE,CAAC,CAAC;IACpG,CAAC;IACD;;;;IAIA0B,kBAAkBA,CAAA,EAAG;MACnB,IAAI,CAACnB,UAAS,GAAI,IAAI,CAACpB,QAAQ,CAAC0C,MAAM,CAAC,CAACC,KAAK,EAAEhB,OAAO,KAAKgB,KAAI,GAAIC,MAAM,CAACjB,OAAO,CAACb,aAAa,CAAC,EAAE,CAAC,CAAC;IACtG,CAAC;IACD;;;;IAIA0B,yBAAyBA,CAAA,EAAG;MAC1B,IAAI,CAACnB,iBAAgB,GAAI,IAAI,CAACrB,QAAQ,CAAC0C,MAAM,CAAC,CAACC,KAAK,EAAEhB,OAAO,KAAKgB,KAAI,GAAIC,MAAM,CAACjB,OAAO,CAACZ,oBAAoB,CAAC,EAAE,CAAC,CAAC;IACpH,CAAC;IACD;;;;IAIA0B,qBAAqBA,CAAA,EAAG;MACtB,IAAI,CAACnB,aAAY,GAAI,IAAI,CAACtB,QAAQ,CAAC0C,MAAM,CAAC,CAACC,KAAK,EAAEhB,OAAO,KAAKgB,KAAI,GAAIC,MAAM,CAACjB,OAAO,CAACX,gBAAgB,CAAC,EAAE,CAAC,CAAC;IAC5G;EAEF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}