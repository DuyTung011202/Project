{"ast":null,"code":"import MISAFunction from \"../../../js/common/function.js\";\nimport axios from 'axios';\nimport { Table } from '../../../js/common/table.js';\n// import Paginate from \"vuejs-paginate-next\";\nexport default {\n  name: \"MISATable\",\n  props: {\n    onUpdate: {\n      type: Function\n    }\n  },\n  async created() {\n    try {\n      this.isLoading = true;\n      const response = await axios.get(\"https://64798739a455e257fa6347c2.mockapi.io/users\");\n      await new Promise(resolve => setTimeout(resolve, 3000));\n      this.products = response.data;\n      this.totalQuantity();\n      this.isLoading = false;\n    } catch (error) {\n      console.error(error);\n    }\n  },\n  data() {\n    return {\n      products: [],\n      selectAll: false,\n      modifiedProducts: [],\n      tableInfo: Table,\n      pageNumber: 1,\n      pageSize: 10,\n      isLoading: false,\n      totalQuantity: 0\n    };\n  },\n  methods: {\n    /**\r\n     * @description: check tất cả checkbox\r\n     * @author: DDTung (27/06/2023)\r\n     */\n    toggleSelectAll() {\n      this.modifiedProducts = [...this.products];\n      for (let i = 0; i < this.modifiedProducts.length; i++) {\n        this.modifiedProducts[i].ProductsChecked = this.selectAll;\n      }\n    },\n    handleCheckboxClick(product) {\n      product.checkboxClicked = true;\n    },\n    handleRowClick(product) {\n      if (!product.checkboxClicked) {\n        product.ProductsChecked = !product.ProductsChecked;\n      }\n      product.checkboxClicked = false;\n    },\n    /**\r\n    * @returns: Tính tổng số lượng\r\n    * @author: DDTung (27/06/2023)\r\n    */\n    caculateTotalQuantity() {\n      this.totalQuantity = this.products.reduce((total, product) => total + product.ProductsQuantity, 0);\n    },\n    /**\r\n    * @returns: Tính tổng nguyên giá\r\n    * @author: DDTung (27/06/2023)\r\n    */\n    totalPrice() {\n      return this.products.reduce((total, product) => total + Number(product.ProductsPrice), 0);\n    },\n    /**\r\n    * @returns: Tính tổng khấu hao\r\n    * @author: DDTung (27/06/2023)\r\n    */\n    totalDepreciation() {\n      return this.products.reduce((total, product) => total + Number(product.ProductsDepreciation), 0);\n    },\n    /**\r\n    * @returns: Tính tổng số tiền còn lại\r\n    * @author: DDTung (27/06/2023)\r\n    */\n    totalResidual() {\n      return this.products.reduce((total, product) => total + Number(product.ProductsResidual), 0);\n    },\n    /**\r\n    * @description: format tiền\r\n    * @author: DDTung (03/07/2023)\r\n    */\n    formatMoney(money) {\n      return MISAFunction.formatMoney(money);\n    }\n  }\n};","map":{"version":3,"names":["MISAFunction","axios","Table","name","props","onUpdate","type","Function","created","isLoading","response","get","Promise","resolve","setTimeout","products","data","totalQuantity","error","console","selectAll","modifiedProducts","tableInfo","pageNumber","pageSize","methods","toggleSelectAll","i","length","ProductsChecked","handleCheckboxClick","product","checkboxClicked","handleRowClick","caculateTotalQuantity","reduce","total","ProductsQuantity","totalPrice","Number","ProductsPrice","totalDepreciation","ProductsDepreciation","totalResidual","ProductsResidual","formatMoney","money"],"sources":["D:\\Learning\\MISA_FRESHER_WEB\\freshermisa\\web202305\\mf1661-ddtung\\vuejs\\web-05\\src\\components\\base\\table\\MISATable.vue"],"sourcesContent":["<template>\r\n    <div id=\"table\">\r\n        <div class=\"table\">\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"text-center width-fit\">\r\n                            <input type=\"checkbox\" v-model=\"selectAll\" @change=\"toggleSelectAll\" />\r\n                        </th>\r\n                        <th class=\"stt text-center\">{{ tableInfo.numeric }} <div class=\"tooltip-stt\">{{\r\n                            tableInfo.numericTooltip }}</div>\r\n                        </th>\r\n                        <th>{{ tableInfo.fixed_asset_code }}</th>\r\n                        <th>{{ tableInfo.fixed_asset_name }}</th>\r\n                        <th>{{ tableInfo.fixed_asset_category_name }}</th>\r\n                        <th>{{ tableInfo.department_name }}</th>\r\n                        <th class=\"text-center\">{{ tableInfo.quantity }}</th>\r\n                        <th class=\"text-right\">{{ tableInfo.cost }}</th>\r\n                        <th class=\"text-right\">{{ tableInfo.depreciation }}<div class=\"tooltip-kh\">Khấu hao/Hao mòn lũy kế\r\n                            </div>\r\n                        </th>\r\n                        <th class=\"text-right\">{{ tableInfo.residualValue }}</th>\r\n                        <th>{{ tableInfo.function }}</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr class=\"empty-data\" v-if=\"totalQuantity === 0\">\r\n                        <td colspan=\"12\" class=\"w-100\">\r\n                            <div class=\"no-data\">\r\n                                <div class=\"icon-noData\"></div>\r\n                                <h3>Không có dữ liệu</h3>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                    <tr v-for=\"(product) in products\" :key=\"product.ProductsId\" @dblclick=\"onUpdate(product)\"\r\n                        @click=\"handleRowClick(product)\">\r\n                        <td class=\"text-center\">\r\n                            <input type=\"checkbox\" v-model=\"product.ProductsChecked\"\r\n                                @click.stop=\"handleCheckboxClick(product)\" />\r\n                        </td>\r\n                        <td class=\"text-center\">{{ product.ProductsId }}</td>\r\n                        <td>{{ product.ProductsCode }}</td>\r\n                        <td>{{ product.ProductsName }}</td>\r\n                        <td>{{ product.ProductsType }}</td>\r\n                        <td>{{ product.ProductsDepartment }}</td>\r\n                        <td class=\"text-center\">{{ product.ProductsQuantity }}</td>\r\n                        <td class=\"text-right\">{{ formatMoney(product.ProductsPrice) }}</td>\r\n                        <td class=\"text-right\">{{ formatMoney(product.ProductsDepreciation) }}</td>\r\n                        <td class=\"text-right\">{{ formatMoney(product.ProductsResidual) }}</td>\r\n                        <td>\r\n                            <div class=\"function-table\">\r\n                                <div class=\"icon icon-edit\" @click=\"onUpdate(product)\"></div>\r\n                                <div class=\"icon icon-duplicate\"></div>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n                <tfoot>\r\n                    <tr>\r\n                        <td colspan=\"3\">Tổng số: <strong>{{ products.length }}</strong> bản ghi</td>\r\n                        <td colspan=\"3\">\r\n                            <div class=\"d-flex align-items-center\">\r\n                                <MISAPagination v-model:pageNumber=\"pageNumber\" v-model:pageSize=\"pageSize\"\r\n                                    :products=\"products\">\r\n                                </MISAPagination>\r\n                            </div>\r\n                        </td>\r\n                        <td>\r\n                            <strong>{{ totalQuantity }}</strong>\r\n                        </td>\r\n                        <td class=\"text-end\">\r\n                            <strong>{{ formatMoney(totalPrice) }}</strong>\r\n                        </td>\r\n                        <td class=\"text-end\">\r\n                            <strong>{{ formatMoney(totalDepreciation) }}</strong>\r\n                        </td>\r\n                        <td class=\"text-end\">\r\n                            <strong>{{ formatMoney(totalResidual) }}</strong>\r\n                        </td>\r\n                        <td></td>\r\n                    </tr>\r\n\r\n                </tfoot>\r\n                <MISALoading v-if=\"isLoading\"></MISALoading>\r\n\r\n            </table>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport MISAFunction from \"../../../js/common/function.js\";\r\nimport axios from 'axios';\r\n\r\nimport { Table } from '../../../js/common/table.js';\r\n// import Paginate from \"vuejs-paginate-next\";\r\nexport default {\r\n    name: \"MISATable\",\r\n    props: {\r\n\r\n\r\n        onUpdate: {\r\n            type: Function\r\n        }\r\n    },\r\n\r\n    async created() {\r\n        try {\r\n            this.isLoading = true;\r\n            const response = await axios.get(\"https://64798739a455e257fa6347c2.mockapi.io/users\");\r\n            await new Promise((resolve) => setTimeout(resolve, 3000));\r\n            this.products = response.data;\r\n            this.totalQuantity();\r\n            this.isLoading = false;\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    },\r\n\r\n\r\n\r\n    data() {\r\n        return {\r\n            products: [],\r\n            selectAll: false,\r\n            modifiedProducts: [],\r\n            tableInfo: Table,\r\n            pageNumber: 1,\r\n            pageSize: 10,\r\n            isLoading: false,\r\n            totalQuantity: 0,\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        /**\r\n         * @description: check tất cả checkbox\r\n         * @author: DDTung (27/06/2023)\r\n         */\r\n        toggleSelectAll() {\r\n            this.modifiedProducts = [...this.products];\r\n            for (let i = 0; i < this.modifiedProducts.length; i++) {\r\n                this.modifiedProducts[i].ProductsChecked = this.selectAll;\r\n            }\r\n        },\r\n        handleCheckboxClick(product) {\r\n            product.checkboxClicked = true;\r\n        },\r\n        handleRowClick(product) {\r\n            if (!product.checkboxClicked) {\r\n                product.ProductsChecked = !product.ProductsChecked;\r\n            }\r\n            product.checkboxClicked = false;\r\n        },\r\n\r\n        /**\r\n       * @returns: Tính tổng số lượng\r\n       * @author: DDTung (27/06/2023)\r\n       */\r\n        caculateTotalQuantity() {\r\n            this.totalQuantity = this.products.reduce((total, product) => total + product.ProductsQuantity, 0);\r\n        },\r\n        /**\r\n        * @returns: Tính tổng nguyên giá\r\n        * @author: DDTung (27/06/2023)\r\n        */\r\n        totalPrice() {\r\n            return this.products.reduce((total, product) => total + Number(product.ProductsPrice), 0);\r\n        },\r\n        /**\r\n        * @returns: Tính tổng khấu hao\r\n        * @author: DDTung (27/06/2023)\r\n        */\r\n        totalDepreciation() {\r\n            return this.products.reduce((total, product) => total + Number(product.ProductsDepreciation), 0);\r\n        },\r\n        /**\r\n        * @returns: Tính tổng số tiền còn lại\r\n        * @author: DDTung (27/06/2023)\r\n        */\r\n        totalResidual() {\r\n            return this.products.reduce((total, product) => total + Number(product.ProductsResidual), 0);\r\n        },\r\n        /**\r\n       * @description: format tiền\r\n       * @author: DDTung (03/07/2023)\r\n       */\r\n        formatMoney(money) {\r\n            return MISAFunction.formatMoney(money);\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.table,\r\ntable {\r\n    width: 100%;\r\n    height: 100%\r\n}\r\n\r\n#table,\r\n.table {\r\n    background-color: #fff\r\n}\r\n\r\ntable tr,\r\ntd.text,\r\nth.text {\r\n    text-align: left\r\n}\r\n\r\ntfoot,\r\nthead {\r\n    position: sticky;\r\n    left: 0;\r\n    background-color: #f5f5f5\r\n}\r\n\r\n#table {\r\n    border-radius: 3.5px;\r\n    border: 1px solid #afafaf;\r\n    box-shadow: 0 3px 10px rgba(0, 0, 0, .16);\r\n    width: 100%;\r\n    height: 600px;\r\n    overflow: hidden;\r\n}\r\n\r\n\r\n.table {\r\n    overflow-y: scroll;\r\n    position: relative;\r\n\r\n}\r\n\r\n.table .lds-dual-ring[data-v-5f38b7f1] {\r\n    width: 100%;\r\n    height: 100%;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background-color: rgb(255, 255, 255);\r\n}\r\n\r\n.table .lds-dual-ring[data-v-5f38b7f1]:after {\r\n    border-color: #1aa4c8 transparent #1aa4c8 transparent;\r\n}\r\n\r\n.table::-webkit-scrollbar {\r\n    width: 2px;\r\n    height: 5px;\r\n    border-top: 1px solid #e2e2e2\r\n}\r\n\r\n.table::-webkit-scrollbar-thumb {\r\n    border-radius: 2px;\r\n    background-color: #ccc\r\n}\r\n\r\ntable {\r\n    border-collapse: collapse\r\n}\r\n\r\ntable:focus {\r\n    border: none;\r\n    outline: 0\r\n}\r\n\r\ntable tr {\r\n    height: 40px;\r\n    white-space: nowrap\r\n}\r\n\r\n\r\n\r\n.tooltip-kh,\r\n.tooltip-stt {\r\n    color: #000;\r\n    background-color: #fff;\r\n    padding: 8px 20px;\r\n    z-index: 2;\r\n    position: absolute;\r\n    border: 1px solid #000;\r\n    visibility: hidden\r\n}\r\n\r\ntr .kh:hover .tooltip-kh,\r\ntr .stt:hover .tooltip-stt {\r\n    visibility: visible\r\n}\r\n\r\ntable thead tr {\r\n    height: 38px\r\n}\r\n\r\ntable td,\r\ntable th {\r\n    padding: 0 10px\r\n}\r\n\r\ntable td:first-child,\r\ntable td:last-child,\r\ntable th:first-child,\r\ntable th:last-child {\r\n    padding-left: 16px\r\n}\r\n\r\ntd.number,\r\nth.number {\r\n    text-align: right\r\n}\r\n\r\ntable tbody tr {\r\n    max-height: 36px !important;\r\n    border-bottom: 1px solid #e2e2e2;\r\n    cursor: pointer\r\n}\r\n\r\ntable tbody tr:hover {\r\n    background-color: rgba(26, 164, 200, .2)\r\n}\r\n\r\ntable tbody tr:active {\r\n    background-color: rgba(26, 164, 200, .2) !important\r\n}\r\n\r\n.text-center {\r\n    text-align: center\r\n}\r\n\r\n.text-right {\r\n    text-align: end\r\n}\r\n\r\ntable tbody tr:hover .function-table {\r\n    display: flex\r\n}\r\n\r\nthead {\r\n    top: 0;\r\n    z-index: 1\r\n}\r\n\r\ntfoot {\r\n    bottom: -1px;\r\n    z-index: 1000\r\n}\r\n\r\n.function-table {\r\n    justify-content: space-evenly;\r\n    display: none\r\n}\r\n\r\ntable .v-combobox__icon {\r\n    background: var(--icon-url) no-repeat -19px -328px !important;\r\n}\r\n\r\ntable .icon {\r\n    width: 20px;\r\n    height: 20px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    cursor: pointer;\r\n}\r\n\r\n.icon-duplicate {\r\n    background: var(--icon-url) no-repeat -240px -108px\r\n}\r\n\r\n.icon-edit {\r\n    background: var(--icon-url) no-repeat -152px -64px\r\n}\r\n\r\n.icon-prev {\r\n    background: var(--icon-url) no-repeat -199px -242px;\r\n    margin-right: 10px;\r\n}\r\n\r\n.icon-next {\r\n    background: var(--icon-url) no-repeat -242px -242px\r\n}\r\n\r\n.icon-noData {\r\n    background: url(\"../../../assets/img/bg_report_nodata.76e50bd8.svg\") no-repeat 0 0;\r\n    width: 132px;\r\n    height: 76px;\r\n}\r\n\r\n.no-data {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n}\r\n\r\n.empty-data:active {\r\n    background-color: unset !important;\r\n}\r\n\r\n.empty-data:hover {\r\n    background-color: unset;\r\n    cursor: unset;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}