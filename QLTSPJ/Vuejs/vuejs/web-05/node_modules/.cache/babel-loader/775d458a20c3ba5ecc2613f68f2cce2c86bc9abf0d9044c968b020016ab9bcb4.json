{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: \"MISACombobox\",\n  props: {\n    customType: {\n      type: String\n    },\n    iconClass: {\n      type: String\n    },\n    customId: {\n      type: String\n    },\n    customClass: {\n      type: String\n    },\n    customPlaceholder: {\n      type: String\n    },\n    api: {\n      type: String\n    },\n    propText: {\n      type: String\n    },\n    propValue: {\n      type: String\n    },\n    tab: {\n      type: String\n    },\n    modelValue: {}\n  },\n  created() {\n    this.loadData();\n  },\n  mounted() {\n    document.addEventListener(\"click\", this.handleClickOutside);\n  },\n  beforeUnmount() {\n    document.removeEventListener(\"click\", this.handleClickOutside);\n  },\n  watch: {\n    textInput: function (newValue) {\n      let dataFilter = this.dataCbb.filter(i => i[this.propText].includes(newValue.toUpperCase()));\n      if (dataFilter != null) {\n        this.dataFilter = dataFilter;\n      }\n    }\n  },\n  methods: {\n    /**\r\n    * @description: lấy dữ liệu về combobox\r\n    * @author: DDTung (03/07/2023)\r\n    */\n    loadData() {\n      if (this.api) {\n        axios.get(this.api).then(res => {\n          console.log(res.data);\n          this.dataCbb = res.data;\n          this.dataFilter = [...this.dataCbb];\n          let indexSelected = this.dataFilter.findIndex(i => i[this.propValue] = this.modelValue);\n          this.itemSelected = this.dataFilter[indexSelected];\n          this.textInput = this.itemSelected[this.propText];\n        }).catch(err => console.log(err));\n      }\n    },\n    /**\r\n    * @description: ẩn hiện cbb\r\n    * @author: DDTung (03/07/2023)\r\n    */\n    onShowCbb() {\n      this.showCbb = !this.showCbb;\n    },\n    /**\r\n    * @description: xử lý sự kiện khi chọn vào 1 item cbb\r\n    * @author: DDTung (03/07/2023)\r\n    */\n    onSelectItem(item) {\n      this.itemSelected = item;\n      this.textInput = item[this.propText];\n      this.showCbb = false;\n      this.$emit(\"update:modelValue\", item[this.propValue]);\n    },\n    /**\r\n          * @description: xử lý sự kiện khi click ra ngoài cbbb\r\n          * @author: DDTung (03/07/2023)\r\n          */\n    handleClickOutside() {\n      if (!this.$refs[\"combobox\"].contains(event.target)) {\n        this.showCbb = false;\n      }\n    },\n    handleKeyDown(event) {\n      console.log(event.keyCode);\n      if (event.keyCode === 9) {\n        if (!this.$refs[\"combobox\"].contains(event.target)) {\n          this.showCbb = false;\n        }\n      }\n    }\n  },\n  data() {\n    return {\n      showCbb: false,\n      dataCbb: [],\n      dataFilter: [],\n      itemSelected: {},\n      textInput: \"\"\n    };\n  }\n};","map":{"version":3,"names":["axios","name","props","customType","type","String","iconClass","customId","customClass","customPlaceholder","api","propText","propValue","tab","modelValue","created","loadData","mounted","document","addEventListener","handleClickOutside","beforeUnmount","removeEventListener","watch","textInput","newValue","dataFilter","dataCbb","filter","i","includes","toUpperCase","methods","get","then","res","console","log","data","indexSelected","findIndex","itemSelected","catch","err","onShowCbb","showCbb","onSelectItem","item","$emit","$refs","contains","event","target","handleKeyDown","keyCode"],"sources":["C:\\Users\\Admin\\Desktop\\MISA_FRESHER_WEB\\web202305\\mf1661-ddtung\\vuejs\\web-05\\src\\components\\base\\combobox\\MISACombobox.vue"],"sourcesContent":["<template>\r\n    <div class=\"default-combobox\" ref=\"combobox\">\r\n        <span :class=\"iconClass\"></span>\r\n        <input :class=\"customClass\" :tabindex=\"tab\" id=\"customId\" :placeholder=\"customPlaceholder\" v-model=\"textInput\"\r\n            @focus=\"onShowCbb\" @keydown=\"handleKeyDown\" />\r\n        <div class=\"up-down\">\r\n            <div class=\"down\">\r\n                <div @click=\"onShowCbb\" class=\"icon-down-bold\"></div>\r\n            </div>\r\n        </div>\r\n        <div v-show=\"showCbb\" class=\"combobox__data\">\r\n            <a class=\"combobox__data--item\" :class=\"{ 'combobox__data--item-selected': item == itemSelected }\"\r\n                v-for=\"(item, index) in dataFilter\" :key=\"index\" @click=\"onSelectItem(item)\">\r\n                {{ item[propText] }}\r\n            </a>\r\n        </div>\r\n\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    name: \"MISACombobox\",\r\n    props: {\r\n        customType: {\r\n            type: String\r\n        },\r\n        iconClass: {\r\n            type: String\r\n        },\r\n        customId: {\r\n            type: String\r\n        },\r\n        customClass: {\r\n            type: String\r\n        },\r\n        customPlaceholder: {\r\n            type: String\r\n        },\r\n        api: {\r\n            type: String\r\n        },\r\n        propText: {\r\n            type: String,\r\n        },\r\n        propValue: {\r\n            type: String,\r\n        },\r\n        tab: {\r\n            type: String\r\n        },\r\n        modelValue: {}\r\n\r\n    },\r\n    created() {\r\n        this.loadData();\r\n    },\r\n\r\n    mounted() {\r\n        document.addEventListener(\"click\", this.handleClickOutside);\r\n    },\r\n\r\n    beforeUnmount() {\r\n        document.removeEventListener(\"click\", this.handleClickOutside);\r\n    },\r\n    watch: {\r\n        textInput: function (newValue) {\r\n\r\n            let dataFilter = this.dataCbb.filter(i => i[this.propText].includes(newValue.toUpperCase()))\r\n            if (dataFilter != null) {\r\n                this.dataFilter = dataFilter\r\n            }\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        /**\r\n       * @description: lấy dữ liệu về combobox\r\n       * @author: DDTung (03/07/2023)\r\n       */\r\n        loadData() {\r\n            if (this.api) {\r\n                axios.get(this.api)\r\n                    .then(res => {\r\n                        console.log(res.data);\r\n\r\n                        this.dataCbb = res.data;\r\n                        this.dataFilter = [...this.dataCbb]\r\n                        let indexSelected = this.dataFilter.findIndex(i => i[this.propValue] = this.modelValue);\r\n                        this.itemSelected = this.dataFilter[indexSelected];\r\n                        this.textInput = this.itemSelected[this.propText]\r\n\r\n                    })\r\n                    .catch(err => console.log(err))\r\n            }\r\n        },\r\n        /**\r\n       * @description: ẩn hiện cbb\r\n       * @author: DDTung (03/07/2023)\r\n       */\r\n        onShowCbb() {\r\n            this.showCbb = !this.showCbb;\r\n        },\r\n        /**\r\n       * @description: xử lý sự kiện khi chọn vào 1 item cbb\r\n       * @author: DDTung (03/07/2023)\r\n       */\r\n        onSelectItem(item) {\r\n            this.itemSelected = item\r\n            this.textInput = item[this.propText]\r\n            this.showCbb = false;\r\n\r\n            this.$emit(\"update:modelValue\", item[this.propValue])\r\n        },\r\n\r\n        /**\r\n              * @description: xử lý sự kiện khi click ra ngoài cbbb\r\n              * @author: DDTung (03/07/2023)\r\n              */\r\n        handleClickOutside() {\r\n            if (!this.$refs[\"combobox\"].contains(event.target)) {\r\n                this.showCbb = false;\r\n            }\r\n        },\r\n        handleKeyDown(event) {\r\n            console.log(event.keyCode);\r\n            if (event.keyCode === 9) {\r\n                if (!this.$refs[\"combobox\"].contains(event.target)) {\r\n                    this.showCbb = false;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            showCbb: false,\r\n            dataCbb: [],\r\n            dataFilter: [],\r\n            itemSelected: {},\r\n            textInput: \"\",\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.default-combobox {\r\n    position: relative\r\n}\r\n\r\n.default-combobox input {\r\n    margin-right: 11px;\r\n}\r\n\r\n.default-combobox input::placeholder {\r\n    font-size: 13px;\r\n    font-weight: 400;\r\n}\r\n\r\n.combobox-input {\r\n    background-color: #fff;\r\n    border-radius: 2.5px;\r\n    border: 1px solid #afafaf;\r\n    width: 60px;\r\n    height: 25px;\r\n    overflow: hidden;\r\n}\r\n\r\n.icon-filter {\r\n    background: var(--icon-url) no-repeat -240px -65px;\r\n}\r\n\r\n.icon-down-bold {\r\n    background: var(--icon-url) no-repeat -64px -328px;\r\n    position: absolute;\r\n    width: 24px;\r\n    height: 24px;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n    right: 8px !important\r\n}\r\n\r\n.icon-down-bold:hover {\r\n    cursor: pointer;\r\n}\r\n\r\n.combobox__data {\r\n    position: absolute;\r\n    display: flex;\r\n    flex-direction: column;\r\n    z-index: 11111;\r\n    width: 100%;\r\n    top: calc(100% + 2px);\r\n    box-shadow: 0 0 5px #000;\r\n    background-color: #fff;\r\n    border: 1px solid #e6e6e6;\r\n    border-radius: 4px;\r\n    max-height: 200px;\r\n    overflow-y: auto;\r\n}\r\n\r\n.combobox__data--item {\r\n    color: black;\r\n    padding: 12px;\r\n}\r\n\r\n.combobox__data--item:hover {\r\n    background-color: #3fc5e7;\r\n    cursor: pointer;\r\n}\r\n\r\n.combobox__data--item-selected {\r\n    background-color: #22b1d5;\r\n\r\n}\r\n\r\n\r\n\r\n\r\n.combobox__data::-webkit-scrollbar {\r\n    width: 7px;\r\n    height: 7px;\r\n}\r\n\r\n\r\n\r\n.combobox__data::-webkit-scrollbar-track {\r\n    border-radius: 10px;\r\n    background: #d1dae9;\r\n}\r\n\r\n\r\n\r\n.combobox__data::-webkit-scrollbar-thumb {\r\n    background: #abb6c8;\r\n    border-radius: 10px;\r\n}\r\n\r\n\r\n\r\n.combobox__data::-webkit-scrollbar-thumb:hover {\r\n    background: #abb6c8;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}