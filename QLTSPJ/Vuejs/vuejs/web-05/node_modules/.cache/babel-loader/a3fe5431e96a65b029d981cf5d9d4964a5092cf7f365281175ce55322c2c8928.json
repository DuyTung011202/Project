{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"main-header d-flex justify-content-between\"\n};\nconst _hoisted_2 = {\n  class: \"l-main d-flex align-items-center\"\n};\nconst _hoisted_3 = {\n  class: \"r-main d-flex align-items-center\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_MISAInput = _resolveComponent(\"MISAInput\");\n  const _component_MISACombobox = _resolveComponent(\"MISACombobox\");\n  const _component_MISAButton = _resolveComponent(\"MISAButton\");\n  const _component_MISATable = _resolveComponent(\"MISATable\");\n  const _component_MISAForm = _resolveComponent(\"MISAForm\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_MISAInput, {\n    iconClass: \"input-icon icon-search\",\n    customClass: \"default-input\",\n    customPlaceholder: \"Tìm kiếm tài sản\"\n  }), _createVNode(_component_MISACombobox, {\n    iconClass: \"input-icon icon-filter\",\n    placeholder: \"Loại tài sản\",\n    propApi: $data.comboboxUrl,\n    propKey: \"DepartmentIds\",\n    propValue: \"DepartmentCode\"\n  }, null, 8 /* PROPS */, [\"propApi\"]), _createVNode(_component_MISACombobox, {\n    iconClass: \"input-icon icon-filter\",\n    placeholder: \"Bộ phận sử dụng\"\n  })]), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_MISAButton, {\n    customId: \"btn-add\",\n    customClass: \"btn--primary d-flex align-items-center\",\n    iconClass: \"btn--primary-icon\",\n    text: \"Thêm tài sản\",\n    onClick: $options.handleForm\n  }, null, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_MISAButton, {\n    iconClass: \"btn--option\"\n  }), _createVNode(_component_MISAButton, {\n    iconClass: \"btn--delete\",\n    onClick: $options.deleteSelected\n  }, null, 8 /* PROPS */, [\"onClick\"])])]), _createVNode(_component_MISATable, {\n    products: $data.products,\n    totalQuantity: $data.totalQuantity,\n    totalPrice: $data.totalPrice,\n    totalDepreciation: $data.totalDepreciation,\n    totalResidual: $data.totalResidual,\n    onUpdate: $options.onUpdate\n  }, null, 8 /* PROPS */, [\"products\", \"totalQuantity\", \"totalPrice\", \"totalDepreciation\", \"totalResidual\", \"onUpdate\"]), $data.isFormVisible ? (_openBlock(), _createBlock(_component_MISAForm, {\n    key: 0,\n    isFormVisible: $data.isFormVisible,\n    onCloseForm: $options.closeForm,\n    productEdit: $data.productForUpdate\n  }, null, 8 /* PROPS */, [\"isFormVisible\", \"onCloseForm\", \"productEdit\"])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","_component_MISAInput","iconClass","customClass","customPlaceholder","_component_MISACombobox","placeholder","propApi","$data","comboboxUrl","propKey","propValue","_hoisted_3","_component_MISAButton","customId","text","onClick","$options","handleForm","deleteSelected","_component_MISATable","products","totalQuantity","totalPrice","totalDepreciation","totalResidual","onUpdate","isFormVisible","_createBlock","_component_MISAForm","onCloseForm","closeForm","productEdit","productForUpdate"],"sources":["D:\\Learning\\MISA_FRESHER_WEB\\freshermisa\\web202305\\mf1661-ddtung\\vuejs\\web-05\\src\\views\\product\\ProductList.vue"],"sourcesContent":["<template>\r\n  <div class=\"main-header d-flex justify-content-between\">\r\n    <div class=\"l-main d-flex align-items-center\">\r\n      <MISAInput iconClass=\"input-icon icon-search\" customClass=\"default-input\" customPlaceholder=\"Tìm kiếm tài sản\">\r\n      </MISAInput>\r\n      <MISACombobox iconClass=\"input-icon icon-filter\" placeholder=\"Loại tài sản\" :propApi=\"comboboxUrl\"\r\n        propKey=\"DepartmentIds\" propValue=\"DepartmentCode\">\r\n      </MISACombobox>\r\n\r\n      <MISACombobox iconClass=\"input-icon icon-filter\" placeholder=\"Bộ phận sử dụng\">\r\n      </MISACombobox>\r\n\r\n    </div>\r\n    <div class=\"r-main d-flex align-items-center\">\r\n      <MISAButton customId=\"btn-add\" customClass=\"btn--primary d-flex align-items-center\" iconClass=\"btn--primary-icon\"\r\n        text=\"Thêm tài sản\" @click=\"handleForm\">\r\n      </MISAButton>\r\n      <MISAButton iconClass=\"btn--option\"></MISAButton>\r\n      <MISAButton iconClass=\"btn--delete\" @click=\"deleteSelected\"></MISAButton>\r\n    </div>\r\n  </div>\r\n\r\n  <MISATable :products=\"products\" :totalQuantity=\"totalQuantity\" :totalPrice=\"totalPrice\"\r\n    :totalDepreciation=\"totalDepreciation\" :totalResidual=\"totalResidual\" :onUpdate=\"onUpdate\">\r\n  </MISATable>\r\n\r\n  <MISAForm v-if=\"isFormVisible\" :isFormVisible=\"isFormVisible\" @close-form=\"closeForm\" :productEdit=\"productForUpdate\">\r\n  </MISAForm>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { departmentURL } from \"@/js/common/urlAsset\";\r\n\r\nexport default {\r\n  name: \"ProductList\",\r\n  /**\r\n   * @author: DDTung (27/06/2023)\r\n   * @description: Lấy api sản phẩm \r\n   */\r\n  async created() {\r\n    try {\r\n      this.isLoading = true;\r\n      const response = await axios.get(\"https://64798739a455e257fa6347c2.mockapi.io/users\");\r\n      await new Promise((resolve) => setTimeout(resolve, 3000));\r\n      this.products = response.data;\r\n      this.handleCaculate();\r\n      this.isLoading = false;\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  },\r\n\r\n\r\n  data() {\r\n    return {\r\n      products: [],\r\n      isFormVisible: false,\r\n      comboboxUrl: departmentURL,\r\n      productForUpdate: {},\r\n      productForAdd: {\r\n        ProductsCode: \"TS00001\",\r\n        ProductsName: \"\",\r\n        ProductsType: \"\",\r\n        ProductsDepartment: \"\",\r\n        ProductsQuantity: 1,\r\n        ProductsPrice: 0,\r\n        ProductsDepreciation: 1,\r\n        ProductsResidual: 0,\r\n        ProductsChecked: false,\r\n        DepartmentCode: \"\",\r\n      },\r\n      totalQuantity: 0,\r\n      totalPrice: 0,\r\n      totalDepreciation: 0,\r\n      totalResidual: 0,\r\n    };\r\n  },\r\n\r\n\r\n  methods: {\r\n    handleForm() {\r\n      this.productForUpdate = this.productForAdd\r\n      this.isFormVisible = true;\r\n    },\r\n    closeForm() {\r\n      this.productForUpdate = this.productForAdd;\r\n      this.isFormVisible = false;\r\n    },\r\n    onUpdate(product) {\r\n      this.isFormVisible = true;\r\n      this.productForUpdate = product\r\n    },\r\n    btnAddOnClick() {\r\n      this.productForUpdate = {};\r\n      this.isFormVisible = true;\r\n    },\r\n    async deleteSelected() {\r\n      const selectedProducts = this.products.filter(product => product.ProductsChecked);\r\n      for (const product of selectedProducts) {\r\n        try {\r\n          await axios.delete(`https://64798739a455e257fa6347c2.mockapi.io/users/${product.ProductsId}`);\r\n          this.products = this.products.filter(p => p.ProductsId !== product.ProductsId);\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      }\r\n    },\r\n\r\n    handleCaculate() {\r\n      this.caculateTotalQuantity(),\r\n        this.caculateTotalPrice(),\r\n        this.caculateTotalDepreciation(),\r\n        this.caculateTotalResidual()\r\n    },\r\n\r\n    /**\r\n   * @returns: Tính tổng số lượng\r\n   * @author: DDTung (27/06/2023)\r\n   */\r\n    caculateTotalQuantity() {\r\n      this.totalQuantity = this.products.reduce((total, product) => total + product.ProductsQuantity, 0);\r\n    },\r\n    /**\r\n    * @returns: Tính tổng nguyên giá\r\n    * @author: DDTung (27/06/2023)\r\n    */\r\n    caculateTotalPrice() {\r\n      this.totalPrice = this.products.reduce((total, product) => total + Number(product.ProductsPrice), 0);\r\n    },\r\n    /**\r\n    * @returns: Tính tổng khấu hao\r\n    * @author: DDTung (27/06/2023)\r\n    */\r\n    caculateTotalDepreciation() {\r\n      this.totalDepreciation = this.products.reduce((total, product) => total + Number(product.ProductsDepreciation), 0);\r\n    },\r\n    /**\r\n    * @returns: Tính tổng số tiền còn lại\r\n    * @author: DDTung (27/06/2023)\r\n    */\r\n    caculateTotalResidual() {\r\n      this.totalResidual = this.products.reduce((total, product) => total + Number(product.ProductsResidual), 0);\r\n    },\r\n\r\n  }\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style>\r\n.l-main .v-combobox__body {\r\n  width: 180px !important;\r\n  border-radius: 2.5px;\r\n}\r\n\r\n\r\n.l-main .v-combobox__selected {\r\n  height: 35px;\r\n  padding: 0 20px 0 40px !important;\r\n  border: 1px solid #afafaf !important;\r\n  border-radius: 2.5px !important;\r\n\r\n\r\n}\r\n\r\n\r\n.l-main .v-combobox__selected:hover {\r\n  border: 1px solid #1aa4c8 !important;\r\n\r\n}\r\n\r\n.l-main .v-combobox__focus {\r\n  border: 1px solid #1aa4c8 !important;\r\n\r\n}\r\n\r\n.l-main .v-combobox__icon[data-v-fdaf08aa] {\r\n  background: var(--icon-url) no-repeat -62px -322px !important;\r\n}\r\n\r\n.l-main .icon-filter {\r\n  background: var(--icon-url) no-repeat -240px -65px;\r\n}\r\n\r\n.l-main .v-select__list {\r\n  top: 100%;\r\n  min-height: 160px;\r\n}\r\n\r\n\r\n.r-main button {\r\n  padding: 0 !important;\r\n  border: unset !important;\r\n  ;\r\n}\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAA4C;;EAChDA,KAAK,EAAC;AAAkC;;EAWxCA,KAAK,EAAC;AAAkC;;;;;;;6DAZ/CC,mBAAA,CAmBM,OAnBNC,UAmBM,GAlBJD,mBAAA,CAUM,OAVNE,UAUM,GATJC,YAAA,CACYC,oBAAA;IADDC,SAAS,EAAC,wBAAwB;IAACC,WAAW,EAAC,eAAe;IAACC,iBAAiB,EAAC;MAE5FJ,YAAA,CAEeK,uBAAA;IAFDH,SAAS,EAAC,wBAAwB;IAACI,WAAW,EAAC,cAAc;IAAEC,OAAO,EAAEC,KAAA,CAAAC,WAAW;IAC/FC,OAAO,EAAC,eAAe;IAACC,SAAS,EAAC;wCAGpCX,YAAA,CACeK,uBAAA;IADDH,SAAS,EAAC,wBAAwB;IAACI,WAAW,EAAC;QAI/DT,mBAAA,CAMM,OANNe,UAMM,GALJZ,YAAA,CAEaa,qBAAA;IAFDC,QAAQ,EAAC,SAAS;IAACX,WAAW,EAAC,wCAAwC;IAACD,SAAS,EAAC,mBAAmB;IAC/Ga,IAAI,EAAC,cAAc;IAAEC,OAAK,EAAEC,QAAA,CAAAC;wCAE9BlB,YAAA,CAAiDa,qBAAA;IAArCX,SAAS,EAAC;EAAa,IACnCF,YAAA,CAAyEa,qBAAA;IAA7DX,SAAS,EAAC,aAAa;IAAEc,OAAK,EAAEC,QAAA,CAAAE;4CAIhDnB,YAAA,CAEYoB,oBAAA;IAFAC,QAAQ,EAAEb,KAAA,CAAAa,QAAQ;IAAGC,aAAa,EAAEd,KAAA,CAAAc,aAAa;IAAGC,UAAU,EAAEf,KAAA,CAAAe,UAAU;IACnFC,iBAAiB,EAAEhB,KAAA,CAAAgB,iBAAiB;IAAGC,aAAa,EAAEjB,KAAA,CAAAiB,aAAa;IAAGC,QAAQ,EAAET,QAAA,CAAAS;0HAGnElB,KAAA,CAAAmB,aAAa,I,cAA7BC,YAAA,CACWC,mBAAA;;IADqBF,aAAa,EAAEnB,KAAA,CAAAmB,aAAa;IAAGG,WAAU,EAAEb,QAAA,CAAAc,SAAS;IAAGC,WAAW,EAAExB,KAAA,CAAAyB"},"metadata":{},"sourceType":"module","externalDependencies":[]}